---
import { Image } from "astro:assets";
import HeroImage from "../assets/images/menix-in-qemu-cropped.png";
import Button from "./reusable/Button.astro";
import MenixGear from "../assets/logos/menix-gear.svg";
import BlogPostList from "./BlogPostList.astro";
import { loadPostInfos } from "../scripts/blogpost";

const gearSize = 350;

const posts = loadPostInfos();
---

<main class="min-h-screen">
	<section
		class="flex pt-15 items-center justify-between lg:flex-row flex-col-reverse w-full 3xl:w-2/3 mx-auto relative"
	>
		<div class="gear1 gear hidden xl:block">
			<MenixGear width={gearSize} height={gearSize} />
		</div>

		<div class="gear2 gear hidden xl:block">
			<MenixGear width={gearSize} height={gearSize} />
		</div>

		<div class="flex-1 text-4xl">
			<div class="pb-10 xl:pl-50 px-5 flex items-center pt-20 lg:pt-0">
				<div class="flex flex-col items-center xl:items-start">
					<h2
						class="leading-13 max-w-2xl font-semibold text-center xl:text-left"
					>
						Modular 64-bit kernel written in Rust with a familiar
						POSIX-like interface
					</h2>

					<div class="mt-7">
						<Button href="/docs">Getting Started</Button>
					</div>
				</div>
			</div>
		</div>
		<div class="">
			<Image
				src={HeroImage}
				alt="screenhsot of menix running in qemu"
				height={650}
				loading={"eager"}
			/>
		</div>
	</section>

	<section class="mx-auto my-20 max-w-[1080px] px-10">
		<div class="text-3xl dark:text-zinc-100 text-zinc-900 my-10">
			<h3 class="mb-5 text-center sm:text-left">Recent blog posts</h3>
			<hr class="dark:text-zinc-700 text-zinc-300" />
		</div>

		<div>
			<BlogPostList posts={posts} maxItems={3} sort={"date"} />
		</div>
	</section>
</main>

<style>
	.gear {
		position: absolute;
		z-index: -1;
		top: 0;
		left: 0;
	}

	.gear1 {
		top: -190px;
		left: 50px;
		animation: spinning infinite 10s linear;
	}

	.gear2 {
		top: 45px;
		left: -180px;
		rotate: -2deg;
		animation: spinning infinite 10s linear reverse;
	}

	@keyframes spinning {
		0% {
			transform: rotate(0deg);
		}

		100% {
			transform: rotate(360deg);
		}
	}
</style>
